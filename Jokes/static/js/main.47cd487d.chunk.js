(window.webpackJsonpjokes=window.webpackJsonpjokes||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(28)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(11),i=n.n(s),c=n(3),o=n(2),u=n(6),l=n(5),m=n(1),h=n(7),f=(n(18),function(e){var t=e.currentStatus,n=e.sorting,a=e.changeStatus,s=e.refresh;return r.a.createElement("div",{className:"menu"},r.a.createElement("div",{className:"menu__actions"},r.a.createElement("button",{type:"button",className:"menu__button",disabled:!t,onClick:function(){return s()}},"New jokes"),r.a.createElement("button",{type:"button",className:"menu__button",disabled:!t,onClick:function(){return n()}},"Sort"),r.a.createElement("button",{type:"button",className:"menu__button",onClick:function(){return a()}},t?"Show saved jokes":"Back")))}),g=n(8),d=n(12),v=function(e){var t=e.className,n=e.onClick,a=e.disabled,s=e.text;return r.a.createElement("button",{type:"button",className:t,onClick:n,disabled:a},s)},b=function(e){var t=e.iconClass;return r.a.createElement("i",{className:t})},k=(n(19),{"em-face_with_raised_eyebrow":"rgb(0, 0, 0","em-full_moon_with_face":"rgb(0, 46, 0)","em-face_with_hand_over_mouth":"rgb(0, 92, 0)","em-laughing":"rgb(0, 148, 0)","em-joy":"rgb(0, 192, 0)","em-rolling_on_the_floor_laughing":"rgb(0, 255, 0)","em-disappointed":"rgb(46, 0, 0)","em-angry":"rgb(92, 0, 0)","em-triumph":"rgb(148, 0, 0)","em-rage":"rgb(192, 0, 0)","em-face_with_symbols_on_mouth":"rgb(255, 0, 0)"}),_=function(e,t){var n="joke__button joke__button--".concat(t),a=function(e){return r.a.createElement(b,{iconClass:e})}("fas fa-arrow-".concat(t));return r.a.createElement(v,{className:n,onClick:function(){return e()},text:a})},p=function(e){var t=e.currentSmile,n=e.isSaved,a=e.saveJoke,s=e.decreaseRaiting,i=e.raiting,c=e.increaseRaiting,o=e.text,u="em ".concat(t),l={borderColor:k[t]},m=n?"joke__status joke__status--saved":"joke__status";return r.a.createElement("li",{className:"joke"},r.a.createElement("div",{className:"joke__actions"},r.a.createElement(v,{className:m,onClick:function(){return a()},text:n?r.a.createElement("span",{className:"joke__checkmark"}):"Save"}),r.a.createElement("div",{className:"joke__rating"},_(s,"down"),r.a.createElement("p",{className:"joke__test",style:l},r.a.createElement("span",{className:"joke__votes"},i)),_(c,"up"))),r.a.createElement("p",{className:"joke__text"},o),r.a.createElement("div",{className:"joke__smile"},r.a.createElement(b,{iconClass:u})))},j=(n(20),function(e){return e.jokes.map((function(t){return function(e,t,n,a){return r.a.createElement(p,{key:e.id,text:e.text,id:e.id,isSaved:e.isSaved,raiting:e.raiting,saveJoke:function(){return a(e.id)},currentSmile:e.currentSmile,increaseRaiting:function(){return t(e.id)},decreaseRaiting:function(){return n(e.id)}})}(t,e.increaseRaiting,e.decreaseRaiting,e.saveJoke)}))}),y=function(e){var t=j(e);return r.a.createElement("ul",{className:"joke-list"},t)},E=(n(21),function(e){var t=e.id,n=e.text;return r.a.createElement("li",{className:"saved-joke",id:t},r.a.createElement("p",{className:"save-joke__text"},n))}),O=(n(22),function(e){var t=e.jokes.map((function(e){return r.a.createElement(E,{key:e.id,id:e.id,text:e.text})}));return r.a.createElement("ul",{className:"saved-jokes"},t)}),w=(n(23),function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"loading__spinner"},r.a.createElement("i",{className:"far fa-8x fa-laugh fa-spin loading__spinner"})),r.a.createElement("p",{className:"loading__text"},"Loading..."))}),S=n(4),N=n.n(S),x=n(9),R=function(){function e(){Object(c.a)(this,e),this._cursProxy="https://cors-anywhere.herokuapp.com/",this._url="".concat(this._cursProxy,"https://icanhazdadjoke.com"),this._fetchSetup={method:"GET",body:null,headers:{accept:"Accept: application/json"}},this.init()}return Object(o.a)(e,[{key:"init",value:function(){var e=Object(x.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._url,"/search"),this._fetchSetup);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this._maxPages=n.total_pages;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get",value:function(){var t=Object(x.a)(N.a.mark((function t(){var n,a,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=1,i=this._maxPages,n=Math.floor(s+Math.random()*(i+1-s)),t.next=3,fetch("".concat(this._url,"/search?page=").concat(n),this._fetchSetup);case 3:return a=t.sent,t.next=6,a.json();case 6:return r=t.sent,t.abrupt("return",r.results.map((function(t){return e.prepareData(t)})));case 8:case"end":return t.stop()}var s,i}),t,this)})));return function(){return t.apply(this,arguments)}}()}],[{key:"prepareData",value:function(e){return{id:e.id,text:e.joke,raiting:0,isSaved:!1,currentSmile:"em-face_with_raised_eyebrow"}}}]),e}();n(25);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=[{vote:0,class:"em-face_with_raised_eyebrow",color:"rgb(0, 0, 0"},{vote:1,class:"em-full_moon_with_face",color:"rgb(0, 46, 0)"},{vote:5,class:"em-face_with_hand_over_mouth",color:"rgb(0, 92, 0)"},{vote:10,class:"em-laughing",color:"rgb(0, 148, 0)"},{vote:15,class:"em-joy",color:"rgb(0, 192, 0)"},{vote:20,class:"em-rolling_on_the_floor_laughing",color:"rgb(0, 255, 0)"},{vote:-1,class:"em-disappointed",color:"rgb(46, 0, 0)"},{vote:-5,class:"em-angry",color:"rgb(92, 0, 0)"},{vote:-10,class:"em-triumph",color:"rgb(148, 0, 0)"},{vote:-15,class:"em-rage",color:"rgb(192, 0, 0)"},{vote:-20,class:"em-face_with_symbols_on_mouth",color:"rgb(255, 0, 0)"}],D=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={jokes:[],loading:!0},n._className="jokes",n.api=new R,n.increaseRaiting=n.increaseRaiting.bind(Object(m.a)(n)),n.decreaseRaiting=n.decreaseRaiting.bind(Object(m.a)(n)),n.saveJoke=n.saveJoke.bind(Object(m.a)(n)),n.refresh=n.refresh.bind(Object(m.a)(n)),n.sort=n.sort.bind(Object(m.a)(n)),n}return Object(h.a)(t,e),Object(o.a)(t,null,[{key:"changeCurrentSmile",value:function(e){var t=P.findIndex((function(t){return t.vote===e}));if(-1!==t)return P[t].class}}]),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.getFunctions;this.api.get().then((function(t){return e.setJokes(t)})),t(this.refresh,this.sort)}},{key:"getIndex",value:function(e){return this.state.jokes.findIndex((function(t){return t.id===e}))}},{key:"setJokes",value:function(e){this.setState((function(){return{jokes:e,loading:!1}}))}},{key:"getSavedJokes",value:function(){return this.state.jokes.filter((function(e){return e.isSaved}))}},{key:"saveJoke",value:function(e){var t=this.getIndex(e),n=this.state.jokes,a=J({},n[t],{isSaved:!n[t].isSaved});this.insert(a,t)}},{key:"refresh",value:function(){var e=this;this.setState((function(){return{jokes:[],loading:!0}})),this.api.get().then((function(t){return e.setJokes(t)}))}},{key:"sort",value:function(){var e=this.state.jokes,t=Object(g.a)(e).sort((function(e,t){return t.raiting-e.raiting}));this.setState((function(){return{jokes:t}}))}},{key:"decreaseRaiting",value:function(e){var t=this.getIndex(e),n=this.state.jokes[t].raiting-1;this.updateRating(t,n)}},{key:"increaseRaiting",value:function(e){var t=this.getIndex(e),n=this.state.jokes[t].raiting+1;this.updateRating(t,n)}},{key:"insert",value:function(e,t){this.setState((function(n){var a=n.jokes;return{jokes:[].concat(Object(g.a)(a.slice(0,t)),[e],Object(g.a)(a.slice(t+1)))}}))}},{key:"updateRating",value:function(e,n){var a=t.changeCurrentSmile(n),r=this.state.jokes,s=J({},r[e],a?{raiting:n,currentSmile:a}:{raiting:n});this.insert(s,e)}},{key:"renderComponent",value:function(){var e=this.props.status,t=this.state,n=t.loading,a=t.jokes,s=e?r.a.createElement(y,{jokes:a,increaseRaiting:this.increaseRaiting,decreaseRaiting:this.decreaseRaiting,saveJoke:this.saveJoke}):r.a.createElement(O,{jokes:this.getSavedJokes()});return n?r.a.createElement(w,null):s}},{key:"render",value:function(){var e=this.state.loading?"".concat(this._className," jokes--loading"):this._className,t=this.renderComponent();return r.a.createElement("div",{className:e},t)}}]),t}(a.Component),I=(n(26),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={showCurrent:!0},n.changeStatus=n.changeStatus.bind(Object(m.a)(n)),n.getRefFunctions=n.getRefFunctions.bind(Object(m.a)(n)),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"getRefFunctions",value:function(e,t){this.refresh=e,this.sorting=t}},{key:"changeStatus",value:function(){var e=this.state.showCurrent;this.setState((function(){return{showCurrent:!e}}))}},{key:"render",value:function(){var e=this,t=this.state.showCurrent;return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"content"},r.a.createElement(f,{changeStatus:this.changeStatus,currentStatus:t,refresh:function(){return e.refresh()},sorting:function(){return e.sorting()}}),r.a.createElement(D,{getFunctions:this.getRefFunctions,status:t})))}}]),t}(a.Component));n(27);i.a.render(r.a.createElement(I,null),document.getElementById("root"))}],[[13,1,2]]]);
//# sourceMappingURL=main.47cd487d.chunk.js.map